<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday (Person name) üíñ</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script&family=Great+Vibes&family=Poppins:wght@400;600&display=swap');

body { 
  margin:0; 
  font-family: 'Poppins', sans-serif; 
  background: linear-gradient(to bottom, #fce4ec, #ede7f6); 
  overflow-x:hidden; 
  position:relative; 
  scroll-behavior:smooth;
  opacity:0;
  transition: opacity 0.5s ease;
}

/* Countdown Overlay */
#countdownOverlay {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: linear-gradient(135deg, #4a148c, #880e4f);
  color: #fff; display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  z-index:9999; text-align:center;
  font-family: 'Dancing Script', cursive;
  animation: fadeIn 2s ease-in-out;
}
#countdownOverlay h1 { font-size:3em; margin-bottom:20px; animation: glow 4s infinite alternate; }
#countdownOverlay p { font-size:1.5em; }

/* Intro Section */
#intro {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: linear-gradient(to right, #f8bbd0, #e1bee7);
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  z-index:100; text-align:center; animation: fadeInUp 1.5s;
}
#intro h1 { font-family: 'Dancing Script', cursive; font-size:2.8em; color:#d81b60; margin-bottom:20px; animation: glow 4s infinite alternate; }
#intro button { background:#d81b60; color:white; border:none; padding:15px 30px; border-radius:30px; font-size:1.2em; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s ease; }
#intro button:hover { background:#ad1457; transform:scale(1.05); }

/* General Sections */
section { padding: 60px 20px; text-align: center; animation: fadeInUp 1.5s ease both; }
h1, h2, h3 { font-family: 'Dancing Script', cursive; color:#d81b60; text-shadow: 0 0 10px rgba(255,255,255,0.8); }
.hero { min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; background:linear-gradient(to right, #f8bbd0, #e1bee7); position:relative; animation: fadeIn 2s; }
.hero h1 { font-size: 3.2em; text-shadow: 0 0 20px #fff; animation: glow 4s infinite alternate; }

/* Flashcard Gallery */
.flashcard-gallery { position: relative; max-width: 320px; margin: auto; }
.flashcard { display:none; transition: transform 0.5s ease, opacity 0.5s ease; }
.flashcard.show { display:block; transform: scale(1.05); opacity:1; }
.flashcard img { width:100%; border-radius:20px; box-shadow:0 6px 16px rgba(0,0,0,0.25); }
.caption { text-align:center; font-family:'Dancing Script', cursive; color:#d81b60; margin-top:10px; font-size:1.3em; font-weight:600; }

/* Special Message */
.special-msg { max-width:600px; margin:auto; background:#fff8f8; padding:30px; border-radius:20px; box-shadow:0 4px 15px rgba(0,0,0,0.15); font-family: 'Great Vibes', cursive; font-size:1.4em; color:#4a148c; animation: fadeInUp 2s ease; }

/* Cake Section */
.cake { font-size:4em; }
.candle { display:inline-block; transition: opacity 1s ease; animation: flicker 1s infinite alternate; }
.candle.out { opacity:0; animation:none; }

/* Timeline */
.timeline { max-width:800px; margin:auto; text-align:left; }
.timeline div { margin:20px 0; padding:10px; border-left:3px solid #d81b60; padding-left:15px; animation: fadeInUp 1s ease both; }

/* Ending */
.ending { font-size:2em; color:#c2185b; margin-top:40px; position:relative; animation: heartbeat 2s infinite; }

/* Popup */
.popup { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); animation: fadeIn 0.5s; }
.popup-content { background: #fff; margin: 8% auto; padding: 30px; width: 85%; max-width: 600px; border-radius: 15px; box-shadow:0 5px 25px rgba(0,0,0,0.4); text-align: left; font-family: 'Dancing Script', cursive; font-size: 20px; line-height: 1.6; color: #4a148c; animation: popupGlow 2s infinite alternate; }
.close-btn { float: right; font-size: 28px; cursor: pointer; }

/* Effects */
.effect-container { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10; overflow:hidden; }
.confetti, .heart, .sparkle { position:absolute; opacity:0.8; font-size:18px; animation-iteration-count: infinite; animation-timing-function: linear; }

/* GPU hints */
.flashcard img, .confetti, .hero h1, .ending { will-change: transform, opacity; }

/* Keyframes */
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
@keyframes fadeInUp { from{opacity:0; transform:translateY(40px);} to{opacity:1; transform:translateY(0);} }
@keyframes glow { from{text-shadow:0 0 5px #ff80ab;} to{text-shadow:0 0 15px #ff4081;} }
@keyframes flicker { 0%{opacity:1;} 50%{opacity:0.7;} 100%{opacity:1;} }
@keyframes heartbeat { 0%,100%{transform:scale(1);} 50%{transform:scale(1.1);} }
@keyframes popupGlow { from{box-shadow:0 0 15px #ff80ab;} to{box-shadow:0 0 30px #f50057;} }
@keyframes fallSway { 0%{ transform: translateY(-10vh) translateX(0); opacity:0; } 10%{ opacity:1; } 50%{ transform: translateY(50vh) translateX(20px); } 90%{ opacity:1; } 100%{ transform: translateY(100vh) translateX(-20px); opacity:0; } }
</style>
</head>
<body>
<!-- Countdown Overlay -->
<div id="countdownOverlay">
  <h1>Happy Birthday (Person name) üíñ</h1>
  <p>We are almost there...</p>
  <p id="timer"></p>
</div>

<!-- Intro -->
<div id="intro">
  <h1>üéâ Happy Birthday, (Person name)üíñ</h1>
  <button onclick="startExperience()">Start Experience üé∂</button>
</div>

<!-- Hero -->
<section class="hero">
  <h1>Happy Birthday, Mine Forever (Person name)üíñ</h1>
  <p>You are my world, my melody, my reason to smile every day.</p>
</section>

<!-- Gallery -->
<section class="gallery">
  <h2>My Favorite Memories</h2>
  <p style="font-family:'Poppins',sans-serif; font-size:1em; color:#d81b60; margin-bottom:15px;">Swipe to see my favorite memories üíñ</p>
  <div class="flashcard-gallery" id="flashcardGallery">
    <div class="flashcard"><img src="images/img1.jpg" loading="lazy"/><div class="caption">My Sunshine ‚òÄÔ∏è</div></div>
    <div class="flashcard"><img src="images/img2.jpg" loading="lazy"/><div class="caption">The Smile I Live For üíï</div></div>
  </div>
</section>

<!-- Message -->
<section>
  <h2>A Special Message</h2>
  <div class="special-msg">From the day you entered my life, everything has felt brighter... Forever yours üíñ</div>
</section>

<!-- Cake -->
<section>
  <h2>Make a Wish üéÇ‚ú®</h2>
  <div class="cake">üéÇ<span class="candle">üïØ</span><span class="candle">üïØ</span><span class="candle">üïØ</span></div>
  <button onclick="blowCandles()">Blow the candles</button>
</section>

<!-- Timeline -->
<section class="timeline">
  <h2>Our Journey</h2>
  <div><strong>First time we met</strong> ‚Äì A moment I‚Äôll never forget ‚ù§Ô∏è</div>
  <div><strong>Our favorite memory</strong> ‚Äì Endless laughter together ‚ú®</div>
</section>

<!-- Ending -->
<section class="ending">
  <div>Happy Birthday Once Again, My Queen/King ‚ù§Ô∏è</div>
  <button onclick="showLetter()">Press for a Surprise üéÅ</button>
</section>

<!-- Popup -->
<div class="popup" id="popup">
  <div class="popup-content">
    <span class="close-btn" onclick="closeLetter()">&times;</span>
    <h2>üíå A Letter for You üíå</h2>  
    <p>  
      (Person name),<br><br>  
      [LETTER CONTEXT FROM CONSUMER SIDE FOR BIRTHDAY PERSON]   
    </p>
  </div>
</div>

<div class="effect-container" id="effects"></div>

<audio id="bgMusic" loop autoplay><source src="audio/bgMusic.mp3" type="audio/mpeg"></audio>
<audio id="candleSong"><source src="audio/candleSong.mp3" type="audio/mpeg"></audio>
<audio id="favSong"><source src="audio/favSong.mp3" type="audio/mpeg"></audio>

<script>
/* Countdown */
const countdownOverlay=document.getElementById('countdownOverlay');
const countdownTimer=document.getElementById('timer');
const targetDate=new Date('October 1, 2025 00:00:00').getTime();
const countdownInterval=setInterval(()=>{
  const now=new Date().getTime();
  const distance=targetDate-now;
  if(distance<=0){ countdownOverlay.style.display='none'; clearInterval(countdownInterval); }
  else {
    const d=Math.floor(distance/(1000*60*60*24));
    const h=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
    const m=Math.floor((distance%(1000*60*60))/(1000*60));
    const s=Math.floor((distance%(1000*60))/1000);
    countdownTimer.innerText=`${d}d ${h}h ${m}m ${s}s`;
  }
},1000);

/* Start Experience */
function startExperience(){ document.getElementById("intro").style.display="none"; playAudio('bgMusic'); startEffects(); document.body.style.opacity = 1; }
function playAudio(id){ ['bgMusic','candleSong','favSong'].forEach(a=>{ let el=document.getElementById(a); if(a===id){ el.currentTime=0; el.play(); } else { el.pause(); } }); }

/* Candles */
function blowCandles(){ document.querySelectorAll('.candle').forEach(c=>{ c.classList.add('out'); }); playAudio('candleSong'); }

/* Effects (Optimized) */
function startEffects() {
  const container = document.getElementById('effects');
  const emojis = ['‚ú®','üíñ','üéâ','üéä','‚ù§Ô∏è'];
  let active = true;

  function spawn() {
    if (!active) return;
    const el = document.createElement('div');
    el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
    el.className = 'confetti';
    el.style.left = Math.random() * 100 + '%';
    el.style.fontSize = 14 + Math.random() * 18 + 'px';
    el.style.animationDuration = (6 + Math.random() * 6) + 's';
    el.style.animationName = 'fallSway';
    container.appendChild(el);
    setTimeout(() => container.removeChild(el), 10000);
    setTimeout(spawn, 1200 + Math.random() * 800);
  }

  for (let i = 0; i < 10; i++) setTimeout(spawn, i * 500);
  setTimeout(() => { active = false; }, 20000);
}

/* Popup */
function showLetter(){ document.getElementById("popup").style.display="block"; playAudio('favSong'); }
function closeLetter(){ document.getElementById("popup").style.display="none"; document.getElementById("favSong").pause(); }

/* Flashcards */
let currentIndex=0; const flashcards=document.querySelectorAll(".flashcard");
function showCard(i){ flashcards.forEach((c,idx)=>c.classList.toggle("show",idx===i)); }
showCard(currentIndex);
let startX=0; const gallery=document.getElementById("flashcardGallery");
gallery.addEventListener("touchstart",e=>{ startX=e.touches[0].clientX; });
gallery.addEventListener("touchend",e=>{ let endX=e.changedTouches[0].clientX; if(endX<startX-30){ currentIndex=(currentIndex+1)%flashcards.length; } else if(endX>startX+30){ currentIndex=(currentIndex-1+flashcards.length)%flashcards.length; } showCard(currentIndex); });

window.addEventListener('load', () => { document.body.style.opacity = 1; });
</script>
</body>
</html>